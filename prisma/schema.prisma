generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model user {
  userid        Int    @id @default(autoincrement())
  user          String @unique @db.Char(50)
  email         String @unique
  password      String
  numero_conta  String @unique @db.Char(9)
  agencia_conta String @unique @db.Char(4)
  role          String @default("USER")

  eventos  criar_evento[]
  extratos extrato[]
}

model criar_evento {
  eventoid     Int      @id @default(autoincrement())
  titulo       String   @db.VarChar(255)
  descriçao   String   @db.VarChar(255)
  DataCriacao  DateTime @default(now())
  data_termino DateTime @db.Date
  ultima_mod   DateTime @updatedAt
  image        String?  @db.LongText

  criadorid Int
  criador   user @relation(fields: [criadorid], references: [userid], onDelete: Cascade)

  registros registo_evento[]

  @@index([criadorid], map: "criar_evento_criadorid_fkey")
}

model endereço {
  endereçoid String  @id @default(uuid())
  lote        String  @db.VarChar(30)
  numero      String
  quadra      String  @db.VarChar(20)
  bairro      String  @db.VarChar(30)
  referencia  String? @db.VarChar(100)

  registros registo_evento[]
}

model registo_evento {
  registro_id       Int      @id @default(autoincrement())
  nome              String
  sobrenome         String
  responsavel       String
  idade             Int
  idade_responsavel Int
  created_registro  DateTime @default(now())
  image             String?  @db.LongText

  endereçoid String
  endereço   endereço @relation(fields: [endereçoid], references: [endereçoid], onDelete: Cascade)

  eventoid Int
  evento   criar_evento @relation(fields: [eventoid], references: [eventoid], onDelete: Cascade)

  @@index([endereçoid], map: "registo_evento_endereçoid_fkey")
  @@index([eventoid], map: "registo_evento_eventoid_fkey")
}

model extrato {
  extratoid                  String   @id @default(uuid())
  userid                     Int
  user                       user     @relation(fields: [userid], references: [userid], onDelete: Cascade)
  codigoAgenciaOrigem        Int?
  data_lancamento            DateTime
  data_movimento             DateTime
  numeroLote                 Int?
  numeroDocumento            String   @db.VarChar(20)
  codigoHistorico            Int?
  descricao                  String
  valorLancamento            Decimal  @db.Decimal(12, 2)
  sinal                      String
  infoComplementar           String?
  cpfCnpjContrapartida       String?
  tipoPessoaContrapartida    String?
  codigoBancoContrapartida   Int?
  codigoAgenciaContrapartida Int?
  numeroContaContrapartida   String?
  dvContaContrapartida       String?
  tipoLancamento             String?
  dataCriacao                DateTime @default(now())
}
