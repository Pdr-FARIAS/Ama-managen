// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model user {
  userid        Int                     @id @default(autoincrement())
  user          String                  @unique @db.Char(20)
  email         String                  @unique()
  password      String
  numero_conta  String                  @unique @db.Char(9)
  agencia_conta String                  @unique @db.Char(4)
  movimentacoes extrato_Movimentaçao[]
  eventoid      criar_evento[]
}

model extrato_Movimentaçao {
  extratoid                  String   @id @default(uuid())
  userid                     Int // ID do usuário (relacionamento)
  codigoAgenciaOrigem        Int
  dataLancamento             DateTime @map("data_lancamento")
  dataMovimento              DateTime @map("data_movimento")
  numeroLote                 Int?
  numeroDocumento            BigInt
  codigoHistorico            Int?
  descricaoHistorico         String   @map("descricao")
  valorLancamento            Decimal  @db.Decimal(12, 2)
  indicadorSinalLancamento   String   @map("sinal")
  infoComplementar           String?
  cpfCnpjContrapartida       String?
  tipoPessoaContrapartida    String?
  codigoBancoContrapartida   Int?
  codigoAgenciaContrapartida Int?
  numeroContaContrapartida   String?
  dvContaContrapartida       String?
  tipoLancamento             String?
  dataCriacao                DateTime @default(now())
  user                       user     @relation(fields: [userid], references: [userid])
}

model criar_evento {
  eventoid     Int              @id
  titulo       String           @db.Char(255)
  descriçao   String           @db.Char(255)
  DataCriacao  DateTime         @default(now())
  data_termino DateTime         @db.Date()
  ultima_mod   DateTime         @updatedAt
  criadorid    Int
  criador      user             @relation(fields: [criadorid], references: [userid])
  registro     registo_evento[]
}

model endereço {
  endereçoid String           @id @default(uuid())
  lote        String           @db.Char(30)
  numero      Int
  quadra      String           @db.Char(20)
  bairro      String           @db.Char(15)
  referencia  String           @db.Char(50)
  registroid  registo_evento[]
}

model registo_evento {
  registro_id       Int          @id @default(autoincrement())
  nome              String       @unique
  sobrenome         String       @unique
  responsavel       String       @unique
  idade             Int          @unique
  idade_responsavel Int          @unique
  created_registro  DateTime     @default(now())
  endereçoid       String
  endereço         endereço    @relation(fields: [endereçoid], references: [endereçoid])
  eventoid          Int
  evento            criar_evento @relation(fields: [eventoid], references: [eventoid])
}

enum tipo_lançamento {
  DEBITO
  CREDITO
}
